<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Site Blocked - InPeace</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    @keyframes float {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-20px);
      }
    }

    .float-animation {
      animation: float 3s ease-in-out infinite;
    }
  </style>
</head>
<body class="font-cascadia bg-gradient-to-br from-indigo-600 to-purple-700 min-h-screen flex items-center justify-center text-white">
  <div class="text-center px-10 py-16 max-w-2xl mx-auto">
    <!-- Floating Icon -->
    <div class="text-8xl mb-6 float-animation">üïäÔ∏è</div>

    <!-- Main Title -->
    <h1 class="text-6xl font-bold mb-6">Stay In Peace</h1>

    <!-- Blocked Site Display -->
    <div id="blockedSite" class="inline-block text-2xl mb-8 px-6 py-4 bg-white/10 backdrop-blur-sm rounded-xl">
      Site Blocked
    </div>

    <!-- Message -->
    <p class="text-lg leading-relaxed mb-10 opacity-95">
      You chose to block this site to stay focused.<br>
      Take a deep breath and return to what matters.
    </p>

    <!-- Action Button -->
    <div class="mb-12">
      <button
        onclick="window.close()"
        class="px-8 py-4 bg-white text-indigo-600 font-semibold rounded-lg shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300"
      >
        Close Tab
      </button>
    </div>

    <!-- Quote -->
    <div class="italic mt-12 p-6 bg-white/10 backdrop-blur-sm rounded-xl border-l-4 border-white/30">
      <p>"The ability to simplify means to eliminate the unnecessary<br>so that the necessary may speak."</p>
      <p class="mt-3 text-sm opacity-70">‚Äî Hans Hofmann</p>
    </div>

    <!-- Statistics -->
    <div class="flex justify-center gap-8 mt-12">
      <div class="px-6 py-4 bg-white/10 backdrop-blur-sm rounded-xl">
        <span id="blocksToday" class="block text-4xl font-bold">0</span>
        <span class="text-sm opacity-80">Blocks Today</span>
      </div>
      <div class="px-6 py-4 bg-white/10 backdrop-blur-sm rounded-xl">
        <span id="totalBlocks" class="block text-4xl font-bold">0</span>
        <span class="text-sm opacity-80">Total Blocks</span>
      </div>
    </div>
  </div>

  <script>
    // Get the blocked site from URL
    const urlParams = new URLSearchParams(window.location.search);
    const site = urlParams.get('site');
    if (site) {
      document.getElementById('blockedSite').textContent = site;
    }

    // Update block statistics
    async function updateStats() {
      const today = new Date().toDateString();
      let { blockStats = { total: 0, lastDate: today, todayCount: 0 } } =
        await chrome.storage.local.get('blockStats');

      // Reset today count if it's a new day
      if (blockStats.lastDate !== today) {
        blockStats.todayCount = 0;
        blockStats.lastDate = today;
      }

      // Increment counts
      blockStats.total++;
      blockStats.todayCount++;

      // Save updated stats
      await chrome.storage.local.set({ blockStats });

      // Display stats
      document.getElementById('blocksToday').textContent = blockStats.todayCount;
      document.getElementById('totalBlocks').textContent = blockStats.total;
    }

    updateStats();
  </script>
</body>
</html>
